<!DOCTYPE html>
<html>
<head>
    <title>Run Workflow</title>
    <style>
        body { 
            font-family: Arial; 
            background: #E9FFE8; 
            padding: 30px; 
        }

        .box {
            background: white; 
            padding: 25px; 
            width: 70%;
            border-radius: 12px; 
            box-shadow: 0 0 12px rgba(0,0,50,0.15);
            margin: auto;
        }

        textarea, input {
            width: 100%; 
            padding: 10px;
            border-radius: 6px; 
            border: 1px solid #aaa;
            margin-bottom: 12px;
            font-family: monospace;
        }

        button {
            padding: 10px 18px; 
            background: #1a73e8; 
            color: white;
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-size: 15px;
        }

        button:hover { background: #0b4fb3; }

        pre {
            background: #f7f7f7;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            white-space: pre-wrap;        /* üåü FIX: Wrap long text */
            word-wrap: break-word;        /* üåü Prevent overflow */
            max-height: 300px;
            overflow-y: auto;
            font-size: 14px;
        }

        .log-box {
            background: #f7f7f7;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            max-height: 200px;
            overflow-y: auto;
        }

        a { color: #4b3fd3; text-decoration: none; }
        a:hover { text-decoration: underline; }

    </style>
</head>
<body>

<div class="box">
    <h2>Code Review Workflow</h2>

    <form method="post" action="/workflow/run">
        <label>Paste Code:</label>
        <textarea name="code" rows="8" required></textarea>

        <label>Quality Threshold:</label>
        <input type="number" name="threshold" value="8" required>

        <button type="submit">Run Workflow</button>
    </form>

    {% if state %}
    <hr>
    <h3>Workflow Output</h3>
    <pre>{{ state }}</pre>

    <h3>Execution Log</h3>
    <div class="log-box">
        <ul>
            {% for step in log %}
                <li>{{ step }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <br><a href="/">‚Üê Back to Home</a>
</div>

</body>
</html>
